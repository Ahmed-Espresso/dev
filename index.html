<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø­Ù…Ø¯ Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ | Ù…Ø·ÙˆØ± ÙˆÙŠØ¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="screen.css">
    <link rel="stylesheet" id="lemon-theme" href="lemon-theme.css">
    <style>
    body.preload {
        transition: none !important;
        }
    </style>
   
</head>

<body>

    <canvas id="space"></canvas>
    <canvas id="lemon-canvas"></canvas>
    <header>
        <nav>
            <div >
                <ul class="nav-links">
                    <li><a href="index.html" data-i18n="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="projects.html" data-i18n="projects">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</a></li>
                    <li><a href="services.html" data-i18n="services">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
                    <li><a href="aboutme.html" data-i18n="aboutme">Ù…Ù† Ø£Ù†Ø§</a></li>
                    <li><a href="contact.html" data-i18n="contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ</a></li>

                    <div class="controls">
                        <button id="language-toggle" class="btn">en</button>
                    </div>
                    
                    <div class="controls">
                        <button id="theme-toggle" class="btn">ğŸŒ™</button>  
                    </div>
                </ul>
            </div>
        </nav>
    </header>
    
<main id="home">
    <section class="home-sec">
        <div>

            <div class="welcome-card">
                <h1>
                     <div id="typing-container" data-i18n="welcome-me"></div>
                </h1>
            </div>
            
          
            <div class="ramadan-card">
                <h1 data-i18n="ramadan"></h1>
                <p data-i18n="ard"></p>
                <span class="discount" data-i18n="dis"></span><br>
                <div class="offer-countdown">
                  <div class="offer-header" data-i18n="offer_header"></div>
                  <div class="time-block">

                    <div class="time-item">
                      <span id="offer-days">00</span>
                      <span class="time-label" data-i18n="days"></span>
                    </div>
                    
                    <span class="separator">:</span>
                    <div class="time-item">
                      <span id="offer-hours">00</span>
                      <span class="time-label" data-i18n="hours"></span>
                    </div>

                    <span class="separator">:</span>
                    <div class="time-item">
                      <span id="offer-minutes">00</span>
                      <span class="time-label" data-i18n="minutes"></span>
                    </div>

                  </div>
                </div>
              </div>
              
        </div>
    </section>


    <section class="scroll-sec">

        <div  class="scroll-sec-h1">
            <h1 data-i18n="nzra">Ù†Ø¸Ø±Ù‡ Ø³Ø±ÙŠØ¹Ù‡</h1>
        <div>

        <div id="projects-scroll" class="projects-scroll"></div>
        <div id="project-display" class="project-display"></div>

    </section>

    <section class="bot-sec">

        <div  class="bot-sec-h1">
            <h1 data-i18n="msad">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</h1>
        <div>
 
        <div class="chat-container">

            <div class="edge-left"></div>
            <div class="edge-right"></div>

            <span id="bot-name" data-i18n="bot_name">Ù†ÙŠØ±Ùˆ</span>

            <div class="chat-box" id="chatBox"></div>

                <div class="chat-footer">
                    <div class="input-container">

                        <input  type="text" id="userInput" class="chat-input"  data-i18n="botholder" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...">
                        <button id="voice-btn"><i class="fas fa-microphone"></i></button>

                    </div>
                        <button onclick="sendMessage()" class="send-btn" data-i18n="sendbtn"></button>
                </div>
        </div>

    </section>

<!-- Ø£Ø¶Ù Ù‡Ø°Ø§ ÙÙŠ Ù‚Ø³Ù… HTML Ø­ÙŠØ« ØªØ±ÙŠØ¯ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
<section class="collection-sec">
    <div class="custom-container">
        <h1 class="section-title" data-i18n="faq_title"></h1>
        <div class="faq-grid" id="faqGrid"></div>
        <div class="answer-container" id="answerBox">
          
                <div class="answer-content" data-i18n="select_question"></div>
            </div>
        </div>
    </div>
</section>
    <section class=" class="skills-sec"">

        <div  class="skills-sec-h1">
            <h1 data-i18n="skills">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h1>
        <div>
   
        <div class="container">
        
            <div class="skill" data-skill="javascript">
                <i class="fab fa-js"></i>
                <span class="skill-name" data-i18n="javascript">JavaScript</span>

                <div class="skill-bar">
                        <div class="skill-level" style="width: 75%; background-color: #f0db4f;">
                            <span class="skill-percent">75%</span>
                        </div>
                </div>
            </div>

            <div class="skill" data-skill="html">
                <i class="fab fa-html5"></i>
                <span class="skill-name" data-i18n="html">HTML</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 90%; background-color: #e34c26;">
                        <span class="skill-percent">90%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="css">
                <i class="fab fa-css3-alt"></i>
                <span class="skill-name" data-i18n="css">CSS</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 85%; background-color: #264de4;">
                        <span class="skill-percent">85%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="react">
                <i class="fab fa-react"></i>
                <span class="skill-name" data-i18n="react">React</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 70%; background-color: #61dbfb;">
                        <span class="skill-percent">70%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="nodejs">
                <i class="fab fa-node-js"></i>
                <span class="skill-name" data-i18n="nodejs">Node.js</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 65%; background-color: #68a063;">
                        <span class="skill-percent">65%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="php">
                <i class="fab fa-php"></i>
                <span class="skill-name" data-i18n="php">PHP</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 60%; background-color: #777BB3;">
                        <span class="skill-percent">60%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="linux">
                <i class="fab fa-linux"></i>
                <span class="skill-name" data-i18n="linux">Linux</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 80%; background-color: #FCC624;">
                        <span class="skill-percent">80%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="github">
                <i class="fab fa-github"></i>
                <span class="skill-name" data-i18n="github">GitHub</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 76%; background-color: #6e5494;">
                        <span class="skill-percent">76%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="sql">
                <i class="fas fa-database"></i>
                <span class="skill-name" data-i18n="sql">SQL</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 74%; background-color: #00758F;">
                        <span class="skill-percent">74%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="bootstrap">
                <i class="fab fa-bootstrap"></i>
                <span class="skill-name" data-i18n="bootstrap">Bootstrap</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 85%; background-color: #563D7C;">
                        <span class="skill-percent">85%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="tailwind">
                <i class="fas fa-wind"></i>
                <span class="skill-name" data-i18n="tailwind">Tailwind CSS</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 80%; background-color: #38B2AC;">
                        <span class="skill-percent">80%</span>
                    </div>
                </div>
            </div>

            <div class="skill" data-skill="cordova">
                <i class="fas fa-mobile-alt"></i>
                <span class="skill-name" data-i18n="cordova">Cordova</span>

                <div class="skill-bar">
                    <div class="skill-level" style="width: 70%; background-color: #E6710A;">
                        <span class="skill-percent">70%</span>
                    </div>
                </div>

            </div>

        </div>
    </section>

    <section  class="quick-sec">
        <div  class="quick-sec-h1">
            <h1 data-i18n="quick-contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ</h1>
        <div>

        <div class="container">

            <form id="quick-contact-form">

                <div class="form-group">
                    <input type="text" id="name" name="name" placeholder="Ø§Ø³Ù…Ùƒ" data-i18n="namesmall" required>
                </div>

                <div class="form-group">
                    <input type="email" id="email" name="email" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" data-i18n="emailsmall" required>
                </div>

                <div class="form-group">
                    <textarea id="message" name="message" placeholder="Ø±Ø³Ø§Ù„ØªÙƒ" data-i18n="messagesmall" required></textarea>
                </div>

                <div class="quick-btn">

                    <button data-i18n="btnw" type="submit" class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i>
                        <span ></span>
                    </button>

                    <button data-i18n="btne" type="button" class="gmail-btn" id="send-email">
                        <i class="fab fa-google"></i>
                        <span ></span>
                    </button>
                </div>

                
                
            </form>

        </div>
    </section>


    <section  class="statistics-sec">

        <div class="statistics-sec-h1">
            <h1 data-i18n="statistics">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h1>
        <div>

        <div class="container">
       
            <div class="stats-grid">

                <div class="stat-card">
                    <h2 data-i18n="projects-completed">Ù…Ø´Ø±ÙˆØ¹ Ù…ÙƒØªÙ…Ù„</h2>
                    <p data-i18n="projects-count">50+</p>
                </div>

                <div class="stat-card">
                    <h2 data-i18n="happy-clients">Ø¹Ù…ÙŠÙ„ Ø³Ø¹ÙŠØ¯</h2>
                    <p data-i18n="clients-count">30+</p>
                </div>

                <div class="stat-card">
                    <h2 data-i18n="years-experience">Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø©</h2>
                    <p data-i18n="experience-count">5+</p>
                </div>
           
            </div>
        </div>
    </section>
</main>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
<script>

document.addEventListener('DOMContentLoaded', function() {
    const projectsScroll = document.getElementById('projects-scroll');
    const projectDisplay = document.getElementById('project-display');
    const languageToggle = document.getElementById('language-toggle');
    const themeToggle = document.getElementById('theme-toggle');

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    let currentLanguage = localStorage.getItem('lang') || 'ar';
    languageToggle.textContent = currentLanguage === 'ar' ? 'en' : 'ar';

    // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
    function loadProjects() {
    projectsScroll.innerHTML = '';
    fetch('projects.json')
        .then(response => response.json())
        .then(data => {
            data.projects.forEach(project => {
                const projectItem = document.createElement('div');
                projectItem.className = 'project-item';
                // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
                projectItem.dataset.color = project.color;
                
                const isDayMode = document.body.classList.contains('light-theme');
                const nameColor = isDayMode ? '#2E3440' : project.color;
                
                projectItem.innerHTML = `
                    <img src="${project.thumb}" alt="${project.name[currentLanguage]}" draggable="false">
                    <span style="color: ${nameColor}; transition: color 0.3s ease;">${project.name[currentLanguage]}</span>
                `;
                
                projectItem.addEventListener('click', () => showProject(project));
                projectsScroll.appendChild(projectItem);
            });
        });
}
    // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
    function showProject(project) {
        const lang = localStorage.getItem('lang') || 'ar';
        const isDayMode = document.body.classList.contains('light-theme');
        const containerColor = isDayMode ? '#2E3440' : project.color;
        
        projectDisplay.innerHTML = `
            <div class="edge-left"></div>
            <div class="edge-right"></div>
            <div class="project-images">
                ${project.images.map(img => `
                    <div class="project-image">
                        <img src="${img}" alt="${project.name[lang]}">
                    </div>
                `).join('')}
            </div>
            <div class="scroll-content">
                <h2 style="color: ${containerColor};">${project.name[lang]}</h2>
                <p style="color: ${containerColor};">${project.description[lang]}</p>
                <div class="project-buttons">
                    <a href="${project.url}" target="_blank" 
                       style="background-color: ${containerColor}; color: inherit;">
                        ${lang === 'en' ? 'Visit Website' : 'Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹'}
                    </a>
                </div>
            </div>
        `;

        startSlideshow();
    }

    // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
    
function startSlideshow() {
    const images = document.querySelectorAll('.project-image');
    if (!images.length) return;

    let currentIndex = 0;
    const totalImages = images.length;

    // ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ© Ù…ÙØ­Ø³Ù‘ÙÙ†Ø©
    const initSlide = () => {
        images.forEach((img, index) => {
            img.style.opacity = index === 0 ? '1' : '0';
            img.classList.toggle('active', index === 0);
        });
    };

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯
    const showImage = (index) => {
        if (index < 0) index = totalImages - 1;
        if (index >= totalImages) index = 0;

        images.forEach(img => {
            img.style.opacity = '0';
            img.classList.remove('active');
        });

        images[index].style.opacity = '1';
        images[index].classList.add('active');
        currentIndex = index;
    };

    // Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯ Ø¹Ø¯Ù… Ø§Ù„ØªØ±ÙƒÙŠØ²
    let interval = setInterval(() => showImage(currentIndex + 1), 4000);
    document.addEventListener('visibilitychange', () => {
        if (document.hidden) clearInterval(interval);
        else interval = setInterval(() => showImage(currentIndex + 1), 4000);
    });

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù„Ù…Ø³ Ù…Ø¹ Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
    let isSwiping = false;
    const handleTouch = (e) => {
        if (isSwiping) return;
        isSwiping = true;

        const touchStartX = e.touches[0].clientX;
        document.ontouchend = (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const deltaX = touchStartX - touchEndX;

            if (Math.abs(deltaX) > 50) {
                deltaX > 0 ? showImage(currentIndex + 1) : showImage(currentIndex - 1);
            }

            isSwiping = false;
        };
    };

    document.querySelector('.project-images').ontouchstart = handleTouch;
    initSlide();
}


    // Ø£Ø­Ø¯Ø§Ø« ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
    languageToggle.addEventListener('click', () => {
        currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
        localStorage.setItem('lang', currentLanguage);
        languageToggle.textContent = currentLanguage === 'ar' ? 'en' : 'ar';
        loadProjects();
    });

    // Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ
    loadProjects();
});

// ============================================================
// Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (ÙŠÙˆØ¬Ø¯ ÙÙŠ script.js)
// ============================================================
document.getElementById('theme-toggle').addEventListener('click', () => {
    // Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§ ÙÙŠ Ù†Ø¸Ø§Ù…Ùƒ
    setTimeout(() => {
        const projectItems = document.querySelectorAll('.project-item');
        const isDayMode = document.body.classList.contains('light-theme');
        
        projectItems.forEach(item => {
            const color = isDayMode ? '#2E3440' : item.dataset.color;
            item.querySelector('span').style.color = color;
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ø¥Ù† ÙƒØ§Ù† Ù…ÙØªÙˆØ­Ù‹Ø§
        const activeProject = document.querySelector('.scroll-content');
        if(activeProject) {
            // ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ ØªØ¹ÙŠÙŠÙ†Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
            activeProject.querySelectorAll('h2, p').forEach(el => el.style.color = isDayMode ? '#2E3440' : activeProject.dataset.color);
            activeProject.querySelector('a').style.backgroundColor = isDayMode ? '#2E3440' : activeProject.dataset.color;
        }
    }, 600); // ØªØ£Ø®ÙŠØ± ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ù…Ø¯Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
});
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ Ø¥Ù† ÙƒØ§Ù† Ù…ÙØªÙˆØ­Ù‹Ø§
        

</script>


<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
<script>
// Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
let fuse = null;
let cachedResponses = null;

// ØªÙ‡ÙŠØ¦Ø© Fuse.js
function initializeFuse(data) {
    const options = {
        keys: ['messages'],
        includeScore: true,
        threshold: 0.4,
        minMatchCharLength: 2,
        ignoreLocation: true,
        shouldSort: true,
        findAllMatches: true,
        ignoreFieldNorm: true,
        useExtendedSearch: true
    };
    fuse = new Fuse(data, options);
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯
async function fetchResponses() {
    try {
        if (!cachedResponses) {
            const response = await fetch('responses.json');
            if (!response.ok) throw new Error('Failed to load responses');
            cachedResponses = await response.json();
            initializeFuse(cachedResponses);
        }
        return cachedResponses;
    } catch (error) {
        console.error('Error loading responses:', error);
        return [];
    }
}

// ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
function normalizeInput(input) {
    return input
        .trim()
        .toLowerCase()
        .replace(/[\u064B-\u065F\u0610-\u061A]/g, '')
        .replace(/[Ø¥Ø£Ø¢]/g, 'Ø§')
        .replace(/[Ù‰]/g, 'ÙŠ')
        .replace(/[Ø©]/g, 'Ù‡')
        .replace(/[^Ø¡-ÙŠa-zA-Z\s]/g, ' ')
        .replace(/\s+/g, ' ')
        .trim();
}

// Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ ØªØ·Ø§Ø¨Ù‚
function findBestMatch(input) {
    const currentLang = localStorage.getItem('lang') || 'ar';
    const normalizedInput = normalizeInput(input);
    
    if (!fuse) return null;

    const results = fuse.search({
        $or: [
            { messages: `^${normalizedInput}` },
            { messages: `'${normalizedInput}` }
        ]
    });

    if (results.length > 0 && results[0].score < 0.4) {
        const response = results[0].item.response;
        if (typeof response === 'object') {
            return response[currentLang] || response['en'] || response['ar'];
        }
        return response;
    }
    return null;
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª (TTS)
function speak(text) {
    const currentLang = localStorage.getItem('lang') || 'ar';
    let speech = new SpeechSynthesisUtterance(text);
    speech.lang = currentLang === 'ar' ? 'ar-SA' : 'en-US';
    speech.rate = 1;
    speech.pitch = 1;
    speech.volume = 1;
    window.speechSynthesis.speak(speech);
}

// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØª (STT)
function startListening() {
    const currentLang = localStorage.getItem('lang') || 'ar';
    let recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = currentLang === 'ar' ? 'ar-SA' : 'en-US';
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onresult = function(event) {
        let userSpeech = event.results[0][0].transcript;
        document.getElementById('userInput').value = userSpeech;
        sendMessage(true);
    };

    recognition.onerror = function(event) {
        console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª:", event.error);
    };

    recognition.start();
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
async function sendMessage(isVoice = false) {
    try {
        const userInput = document.getElementById('userInput').value.trim();
        if (!userInput) return;

        const currentLang = localStorage.getItem('lang') || 'ar';
        const chatBox = document.getElementById('chatBox');
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        chatBox.innerHTML += `<div class="message user">${userInput}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;
        document.getElementById('userInput').value = '';

        await fetchResponses();
        const bestMatch = findBestMatch(userInput);
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø¯
        let botResponse = bestMatch || (currentLang === 'ar' 
            ? "Ù„Ù… Ø£Ø¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„" 
            : "I couldn't find a suitable answer for this question");

        setTimeout(() => {
            chatBox.innerHTML += `<div class="message bot">${botResponse}</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;
            if (isVoice) speak(botResponse);
        }, 500);

    } catch (error) {
        const currentLang = localStorage.getItem('lang') || 'ar';
        const errorMessage = currentLang === 'ar' 
            ? "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…" 
            : "âš ï¸ System error occurred";
        document.getElementById('chatBox').innerHTML += 
            `<div class="message bot error">${errorMessage}</div>`;
    }
}

// Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
function showWelcomeMessage() {
    const currentLang = localStorage.getItem('lang') || 'ar';
    const chatBox = document.getElementById('chatBox');
    
    const welcomeContent = {
        ar: {
            hi: "Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒÙ… ğŸ‘‹",
            msg: "Ø£Ù†Ø§ Ù†ÙŠØ±Ùˆ, Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ, Ø¬Ø±Ø¨ Ø§Ù† ØªØ³Ø£Ù„Ù†ÙŠ",
            examples: {
                who: "Ù…Ù† Ø§Ù†Øª",
                services: "Ø®Ø¯Ù…Ø§ØªÙƒ",
                contact: "ØªÙˆØ§ØµÙ„",
                offers: "Ø¹Ø±ÙˆØ¶"
            }
        },
        en: {
            hi: "Hi ğŸ‘‹",
            msg: "I'm Nero, your smart assistant. try asking me",
            examples: {
                who: "Who",
                services: "services",
                contact: "Contact",
                offers: "Offers"
            }
        }
    };
    
    const langContent = welcomeContent[currentLang] || welcomeContent.ar;
    
    chatBox.innerHTML = `
        <div class="message bot">
            <h3>${langContent.hi}</h3>
            <p>${langContent.msg}</p>
            <div class="examples" id="bot-btn">
                <a onclick="document.getElementById('userInput').value='${langContent.examples.who}';sendMessage()">${langContent.examples.who}</a>
                <a onclick="document.getElementById('userInput').value='${langContent.examples.services}';sendMessage()">${langContent.examples.services}</a>
                <a onclick="document.getElementById('userInput').value='${langContent.examples.contact}';sendMessage()">${langContent.examples.contact}</a>
                <a onclick="document.getElementById('userInput').value='${langContent.examples.offers}';sendMessage()">${langContent.examples.offers}</a>
            </div>
        </div>
    `;
}

// Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
document.getElementById('userInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendMessage(false);
});

document.getElementById('voice-btn').addEventListener('click', startListening);

// Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
window.addEventListener('DOMContentLoaded', async () => {
    try {
        await fetchResponses();
        showWelcomeMessage();
        document.getElementById('language-toggle').addEventListener('click', showWelcomeMessage);
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©:', error);
    }
});
</script>



<script src="script.js"></script>



        

<script>
    // Ø¥Ø²Ø§Ù„Ø© Ø­Ø§Ù„Ø© preload Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    window.addEventListener('load', () => {
        document.body.classList.remove('preload');
    });
</script>


</body>
</html>